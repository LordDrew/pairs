<html>
<head>
    <script>
        function create () {
            var result = document.getElementById("result")
            var w1 = document.getElementById("w1")
            var w2 = document.getElementById("w2")
            result.value = "<iframe src=\"iframe.html\" width=100% style=\"border:0 ;\" onload=\"";
            result.value += "var data = {";
            console.log()
            result.value += "w1: [" 
            w1.value.split('\n').forEach(l => {
                if (l != "")
                    result.value += "&quot;" + l.replace(/\\/g, "\\\\").replace(/"/g, "\\&quot;") + "&quot;, "
            });
            result.value += "]," 
            result.value += "w2: [" 
            w2.value.split('\n').forEach(l => {
                if (l != "")
                    result.value += "&quot;" + l + "&quot;, "
            });
            result.value += "]};" 
            result.value += "this.contentWindow.postMessage(JSON.stringify(data), '*');\"></iframe>"
        } 
    </script>
</head>
<body>
<textarea id="w1" rows=10>line 1
line 2
</textarea>
<textarea id="w2" rows=10>line 3
line 4
</textarea>
<button onclick="create();">Create</button>
<textarea id="result" readonly=true rows=10 onclick="this.select()">
</textarea>
</body>
</html>